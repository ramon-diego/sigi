<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
<h:body>
	<ui:composition template="/template/template.xhtml">
		<div id="page-wrapper">
			<div class="row">
				<div class="col-md-12">
					<h1 class="page-header">Cadastro de imóveis</h1>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-12 .col-sm-12 .col-lg-12">
					<div class="panel-body">
						<h:form id="form-cadastro" enctype="multipart/form-data">
							<div class="row">
								<div class="col-lg-7">
									<div class="panel panel-info">
										<div class="panel-heading">Dados do imóvel</div>
										<div class="panel-body">
											<div class="row">
												<div class="col-lg-5"></div>
												<div class="col-lg-4">
													<div class="form-group">
														<h:outputText value="Status" />
														<h:selectOneMenu value="#" styleClass="form-control">
															<f:selectItem itemValue="A" itemLabel="Ativo" />
															<f:selectItem itemValue="I" itemLabel="Inativo" />
														</h:selectOneMenu>
													</div>
												</div>
												<div class="col-lg-3">
													<h:outputText value="Código" />
													<h:inputText id="input-id" disabled="true"
														value="#{imovelBean.imovel.id}" styleClass="form-control" />
												</div>

												<div class="col-lg-12">
													<div class="form-group">
														<h:outputText value="Finalidade" />
														<h:selectOneMenu value="#{imovelBean.imovel.finalidade}"
															styleClass="form-control">
															<f:selectItem itemValue="vender" itemLabel="Vender" />
															<f:selectItem itemValue="alugar" itemLabel="Alugar" />
														</h:selectOneMenu>
													</div>
													<div class="form-group">
														<h:outputText value="Tipo" />
														<h:selectOneMenu value="#{imovelBean.imovel.tipoImovel}"
															styleClass="form-control" id="tipo-imoveis">
															<f:selectItem itemValue="apartamento"
																itemLabel="Apartamento" />
															<f:selectItem itemValue="casa" itemLabel="Casa" />
														</h:selectOneMenu>
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-4">
													<div class="form-group">
														<h:outputText value="Valor" />
														<h:inputText value="#{imovelBean.imovel.valor}"
															styleClass="form-control valorMonetario">
															<f:convertNumber pattern="#,##0.00" />
														</h:inputText>
													</div>

												</div>
												<div class="col-lg-4">
													<div class="form-group">
														<h:outputText value="Condomínio" />
														<h:inputText value="#{imovelBean.imovel.valorCondominio}"
															styleClass="form-control valorMonetario">
															<f:convertNumber pattern="#,##0.00" />
														</h:inputText>
													</div>
												</div>
												<div class="col-lg-4">
													<div class="form-group">
														<h:outputText value="IPTU" />
														<h:inputText value="#{imovelBean.imovel.valorIptu}"
															styleClass="form-control valorMonetario">
															<f:convertNumber pattern="#,##0.00" />
														</h:inputText>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>

								<div class="col-lg-5">
									<!-- 									<div class="panel panel-info"> -->
									<div class="panel-body">
										<div class="row">
											<div class="embed-responsive embed-responsive-16by9">
												<h:inputFile pt:multiple="multiple" />

											</div>
										</div>
									</div>
									<!-- 									</div> -->
								</div>
							</div>

							<div class="panel with-nav-tabs panel-info">
								<div class="panel-heading">
									<ul class="nav nav-tabs remove-border-tabs">
										<li class="active"><a data-toggle="tab"
											href="#dependencias">Dependências</a></li>
										<li><a data-toggle="tab" href="#areas">Áreas</a></li>
										<li><a data-toggle="tab" href="#outros">Outros</a></li>
									</ul>
								</div>
								<div class="panel-body">
									<div class="tab-content">
										<div class="tab-pane fade in active" id="dependencias">
											<div class="row">
												<div class="col-lg-3">
													<div class="form-group">
														<h:outputText value="Dormítório(s)" />
														<h:inputText
															value="#{imovelBean.atributoImovel.dormitorio}"
															styleClass="form-control input-dependencias" />
													</div>
												</div>
												<div class="col-lg-3">
													<div class="form-group">
														<h:outputText value="Sala(s)" />
														<h:inputText value="#{imovelBean.atributoImovel.sala}"
															styleClass="form-control input-dependencias" />
													</div>
												</div>
												<div class="col-lg-3">
													<div class="form-group">
														<h:outputText value="Cozinha(s)" />
														<h:inputText value="#{imovelBean.atributoImovel.cozinha}"
															styleClass="form-control input-dependencias" />
													</div>
												</div>
												<div class="col-lg-3">
													<div class="form-group">
														<h:outputText value="Suíte Master" />
														<h:inputText
															value="#{imovelBean.atributoImovel.suiteMaster}"
															styleClass="form-control input-dependencias" />
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-3">
													<div class="form-group">
														<h:outputText value="Suíte Simples" />
														<h:inputText
															value="#{imovelBean.atributoImovel.suiteSimples}"
															styleClass="form-control input-dependencias" />
													</div>
												</div>
												<div class="col-lg-3">
													<div class="form-group">
														<h:outputText value="BWC Social" />
														<h:inputText
															value="#{imovelBean.atributoImovel.bwcSocial}"
															styleClass="form-control input-dependencias" />
													</div>
												</div>
												<div class="col-lg-3">
													<div class="form-group">
														<h:outputText value="BWC Suíte" />
														<h:inputText value="#{imovelBean.atributoImovel.bwcSuite}"
															id="bwc-suite"
															styleClass="form-control input-dependencias" />
													</div>
												</div>
												<div class="col-lg-3">
													<div class="form-group">
														<h:outputText value="Área de Serviço" />
														<h:inputText
															value="#{imovelBean.atributoImovel.areaDeServico}"
															id="area-servico"
															styleClass="form-control input-dependencias" />
													</div>
												</div>
												<div class="col-lg-3">
													<div class="form-group">
														<h:outputText value="Vaga(s) Garagem" />
														<h:inputText
															value="#{imovelBean.atributoImovel.vagaGaragem}"
															id="vagas-garagem"
															styleClass="form-control input-dependencias" />
													</div>
												</div>
											</div>
										</div>
										<div class="tab-pane fade" id="areas">
											<div class="row">
												<div class="col-lg-4">
													<div class="form-group">
														<h:outputText value="Total (m²)" />
														<h:inputText value="#" styleClass="form-control" />
													</div>
												</div>
												<div class="col-lg-4">
													<div class="form-group">
														<h:outputText value="Útil (m²)" />
														<h:inputText value="#" styleClass="form-control" />
													</div>
												</div>
												<div class="col-lg-4">
													<div class="form-group">
														<h:outputText value="Privativa (m²)" />
														<h:inputText value="#" styleClass="form-control" />
													</div>
												</div>
												<div class="col-lg-4">
													<div class="form-group">
														<h:outputText value="Construída (m²)" />
														<h:inputText value="#" styleClass="form-control" />
													</div>
												</div>
												<div class="col-lg-4">
													<div class="form-group">
														<h:outputText value="Terreno (m²)" />
														<h:inputText value="#" styleClass="form-control" />
													</div>
												</div>
											</div>
										</div>
										<div class="tab-pane fade" id="outros">
											<div class="row">
												<div class="col-lg-3">
													<div class="form-group">
														<h:outputText value="Elevador(es)" />
														<h:inputText value="#{imovelBean.atributoImovel.elevador}"
															styleClass="form-control input-dependencias" />
													</div>
												</div>

												<div class="col-lg-3">
													<div class="checkbox">
														<label> <h:selectBooleanCheckbox
																value="#{imovelBean.atributoImovel.monitoramento}" />Monitoramento
															24h
														</label>
													</div>
													<div class="checkbox">
														<label> <h:selectBooleanCheckbox
																value="#{imovelBean.atributoImovel.portaria}" />Portaria
															24h
														</label>
													</div>
													<div class="checkbox">
														<label> <h:selectBooleanCheckbox
																value="#{imovelBean.atributoImovel.portaoEletronico}" />Portão
															Eletrônico
														</label>
													</div>
												</div>

												<div class="col-lg-3">
													<div class="checkbox">
														<label><h:selectBooleanCheckbox
																value="#{imovelBean.atributoImovel.churrasqueira}" />Churrasqueira
														</label>
													</div>
													<div class="checkbox">
														<label> <h:selectBooleanCheckbox
																value="#{imovelBean.atributoImovel.espacoGourmet}" />Espaço
															Gourmet
														</label>
													</div>
													<div class="checkbox">
														<label> <h:selectBooleanCheckbox
																value="#{imovelBean.atributoImovel.piscinaAdulto}" />Piscina
															Adulto
														</label>
													</div>
													<div class="checkbox">
														<label><h:selectBooleanCheckbox
																value="#{imovelBean.atributoImovel.piscinaInfantil}" />Piscina
															Infantil </label>
													</div>
												</div>

												<div class="col-lg-3">
													<div class="checkbox">
														<label> <h:selectBooleanCheckbox
																value="#{imovelBean.atributoImovel.playground}" />Playground
														</label>
													</div>
													<div class="checkbox">
														<label><h:selectBooleanCheckbox
																value="#{imovelBean.atributoImovel.quadraPoliesportiva}" />Quadra
															Poliesportiva </label>
													</div>
													<div class="checkbox">
														<label> <h:selectBooleanCheckbox
																value="#{imovelBean.atributoImovel.salaoDeFesta}" />Salão
															de Festas
														</label>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-lg-8">
									<div class="panel panel-info">
										<div class="panel-heading">Endereço</div>
										<div class="panel-body">
											<div class="row">
												<div class="col-lg-4">
													<div class="form-group input-group">
														<h:outputText value="CEP" />
														<h:inputText class="form-control cep mask-cep"
															value="#{imovelBean.endereco.cep}" id="input-cep" />
														<span class="input-group-btn">
															<button class="btn btn-default" type="button"
																style="margin-bottom: -20px">
																<i class="fa fa-search"></i>
															</button>
														</span>
													</div>
												</div>
												<div class="col-lg-8">
													<div class="form-group">
														<h:outputText value="Rua" />
														<h:inputText id="input-rua"
															value="#{imovelBean.endereco.rua}"
															styleClass="form-control rua" />
													</div>
												</div>
											</div>

											<div class="row">
												<div class="col-lg-2">
													<div class="form-group">
														<h:outputText value="Número" />
														<h:inputText id="input-numero"
															value="#{imovelBean.endereco.numero}"
															styleClass="form-control" />
													</div>
												</div>
												<div class="col-lg-6">
													<div class="form-group">
														<h:outputText value="Complemento" />
														<h:inputText id="input-complemento"
															value="#{imovelBean.endereco.complemento}"
															styleClass="form-control" />
													</div>
												</div>
												<div class="col-lg-4">
													<div class="form-group">
														<h:outputText value="Bairro" />
														<h:inputText id="input-bairro"
															value="#{imovelBean.endereco.bairro}"
															styleClass="form-control bairro" />
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-6">
													<div class="form-group">
														<h:outputText value="Cidade" />
														<h:inputText id="input-cidade"
															value="#{imovelBean.cidade.nome}"
															styleClass="form-control cidade" />
													</div>
												</div>
												<div class="col-lg-2">
													<div class="form-group">
														<h:outputText value="Estado" id="txtEstado" />
														<h:selectOneMenu id="input-estado"
															value="#{imovelBean.cidade.estado}"
															styleClass="form-control uf">
															<f:selectItem itemValue="" itemLabel="UF" />
															<f:selectItem itemValue="PR" itemLabel="PR" />
															<f:selectItem itemValue="BA" itemLabel="BA" />
														</h:selectOneMenu>
													</div>
												</div>
												<div class="col-lg-4">
													<div class="form-group">
														<h:outputText value="País" />
														<h:inputText id="input-pais" value="#"
															styleClass="form-control" />
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-lg-4">
									<div class="panel panel-info">
										<img src="../images/google-maps.png" alt="google-maps-img" />
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-lg-6">
									<div class="form-group">
										<h:outputText value="Observações" />
										<h:inputTextarea value="#{imovelBean.imovel.observacoes}"
											rows="5" styleClass="form-control" />
									</div>
								</div>
								<div class="col-lg-6">

									<div class="panel with-nav-tabs panel-info">
										<div class="panel-heading">
											<ul class="nav nav-tabs remove-border-tabs">
												<li class="active"><a data-toggle="tab"
													href="#proprietario">Proprietário</a></li>
												<li><a data-toggle="tab" href="#angariador">Angariador</a></li>
												<li><a data-toggle="tab" href="#opcao">Opção</a></li>
											</ul>
										</div>
										<div class="panel-body">
											<div class="tab-content">
												<div class="tab-pane fade in active" id="proprietario">
													<div class="row">
														<div class="col-lg-12">
															<div class="input-group">
																<h:outputText value="Nome" />
																<h:inputText id="input-proprietario"
																	value="#{imovelBean.proprietario.nomeFantasia}"
																	styleClass="form-control" />
																<span class="input-group-btn">
																	<button class="btn btn-primary" type="button"
																		data-target="#modalProprietario" data-toggle="modal"
																		style="margin-bottom: -20px">
																		<i class="fa fa-search"></i>
																	</button>
																</span>
															</div>
														</div>
													</div>
												</div>
												<div class="tab-pane" id="angariador">
													<div class="input-group">
														<h:outputText value="Nome" />
														<h:inputText id="input-angariador"
															value="#{imovelBean.angariador.nomeFantasia}"
															styleClass="form-control" />
														<span class="input-group-btn">
															<button class="btn btn-primary" type="button"
																data-target="#modalAngariador" data-toggle="modal"
																style="margin-bottom: -20px">
																<i class="fa fa-search"></i>
															</button>
														</span>
													</div>
												</div>

												<div class="tab-pane" id="opcao">
													<div class="row">
														<div class="col-lg-4">
															<h:outputText value="Início" />
															<h:inputText
																value="#{imovelBean.exclusividadeImovel.dataInicio}"
																styleClass="form-control data">
																<f:convertDateTime pattern="dd/MM/yyyy" locale="pt_BR" />
															</h:inputText>
														</div>
														<div class="col-lg-4">
															<h:outputText value="Encerramento" />
															<h:inputText
																value="#{imovelBean.exclusividadeImovel.dataRegistro}"
																styleClass="form-control data">
																<f:convertDateTime pattern="dd/MM/yyyy" locale="pt_BR" />
															</h:inputText>
														</div>
														<div class="col-lg-4">
															<h:outputText value="Dias" />
															<h:inputText
																value="#{imovelBean.exclusividadeImovel.periodo}"
																styleClass="form-control" />
														</div>
													</div>
												</div>

											</div>
											<!-- final tab-content -->
										</div>
									</div>
								</div>
							</div>
							<script type="text/javascript">
								$(document).ready(function(){
									var modalAbertoProprietario = $('.divEmpty').html();
									var modalAbertoAngariador = $('.divEmpty').html();

									$("#btn-modal-angariador").click(function(){
										$("#modalAngariador").modal('show');
										$("#modalProprietario").modal('hide');
									});


									$("#btn-modal-proprietario").click(function(){
										$("#modalAngariador").modal('hide');
										$("#modalProprietario").modal('show');
									});
									
									
									if(modalAberto.trim()){
										$("#modalProprietario").modal('show');
									 }
								})
							</script>

							<div class="modal fade" id="modalProprietario" role="dialog">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">

											<button type="button" class="close" data-dismiss="modal"
												aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>

										</div>
										<div class="modal-body">
											<div class="row">
												<div class="col-lg-8">
													<div class="form-group">
														<h:outputLabel value="Nome / Razão social"
															styleClass="control-label" />
														<h:inputText value="#{imovelBean.nome}"
															pt:placeholder="Nome / Razão social"
															styleClass="form-control" />
													</div>

												</div>

												<div class="col-lg-4">
													<div class="form-group">
														<h:outputLabel value="CPF / CNPJ"
															styleClass="control-label" />
														<h:inputText value="#{imovelBean.cpfCnpj}"
															pt:placeholder="CPF ou CNPJ" styleClass="form-control" />
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-8">
													<div class="form-group">
														<h:commandButton
															action="#{imovelBean.pesquisarProprietario}"
															value="Pesquisar" id="btn-pesquisar"
															styleClass="btn btn-info" />
													</div>
												</div>

												<div class="col-lg-4">
													<div class="input-group">
														<span class="input-group-btn">
															<button class="btn btn-default btn-sm" type="button"
																id="btn-modal-angariador">
																<i class="fa fa-arrow-right" aria-hidden="true"></i>
															</button>
														</span>
													</div>
												</div>
											</div>

											<div class="divEmpty">
												<h:dataTable value="#{imovelBean.proprietarios}"
													var="proprietario" id="dt-proprietarios"
													styleClass="table table-bordered"
													rendered="#{not empty imovelBean.proprietarios}">

													<h:column>
														<f:facet name="header">
															<h:outputText value="CÓDIGO" />
														</f:facet>
									               #{proprietario.id}
									            </h:column>

													<h:column>
														<f:facet name="header">
															<h:outputText value="NOME" />
														</f:facet>
												    #{proprietario.nomeFantasia}
									            </h:column>

													<h:column>
														<f:facet name="header">
															<h:outputText value="CPF / CNPJ" />
														</f:facet>
														<h:outputText value="#{proprietario.cpfCnpj}" />

													</h:column>

													<h:column>
														<f:facet name="header">
															<h:outputText value="Editar" />
														</f:facet>

														<h:commandButton value="Selecione"
															styleClass="btn btn-default btn-sm"
															action="#{imovelBean.registraProprietario(proprietario)}" />

													</h:column>
												</h:dataTable>
											</div>
										</div>

										<div class="modal-footer">
											<button type="button" class="btn btn-default"
												data-dismiss="modal">Fechar</button>
										</div>
									</div>
								</div>
							</div>

							<div class="modal fade" id="modalAngariador" role="dialog">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"
												aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>

										</div>
										<div class="modal-body">
											<div class="row">
												<div class="col-lg-8">
													<div class="form-group">
														<h:outputLabel value="Nome" styleClass="control-label" />
														<h:inputText value="#{imovelBean.nome}"
															pt:placeholder="Nome corretor" styleClass="form-control" />
													</div>

												</div>

												<div class="col-lg-4">
													<div class="form-group">
														<h:outputLabel value="CRECI" styleClass="control-label" />
														<h:inputText value="#{imovelBean.cpfCnpj}"
															pt:placeholder="CRECI" styleClass="form-control" />
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-8">
													<div class="form-group">
														<h:commandButton
															action="#{imovelBean.pesquisarAngariador}"
															value="Pesquisar" id="btn-pesquisar-angariador"
															styleClass="btn btn-info" />
													</div>
												</div>

												<div class="col-lg-4">
													<div class="input-group">
														<span class="input-group-btn">
															<button class="btn btn-default btn-sm" type="button"
																id="btn-modal-proprietario">
																<i class="fa fa-arrow-left" aria-hidden="true"></i>
															</button>
														</span>
													</div>
												</div>
											</div>


											<div class="divEmpty">
												<h:dataTable value="#{imovelBean.angariadores}"
													var="angariador" id="dt-angariador"
													styleClass="table table-bordered"
													rendered="#{not empty imovelBean.angariadores}">

													<h:column>
														<f:facet name="header">
															<h:outputText value="CÓDIGO" />
														</f:facet>
									               #{angariador.id}
									            </h:column>

													<h:column>
														<f:facet name="header">
															<h:outputText value="NOME" />
														</f:facet>
												    #{angariador.nomeFantasia}
									            </h:column>

													<h:column>
														<f:facet name="header">
															<h:outputText value="Editar" />
														</f:facet>

														<h:commandButton value="Selecione"
															styleClass="btn btn-default btn-sm"
															action="#{imovelBean.registraAngariador(angariador)}" />

													</h:column>
												</h:dataTable>
											</div>
										</div>

										<div class="modal-footer">
											<button type="button" class="btn btn-default"
												data-dismiss="modal">Fechar</button>
										</div>
									</div>
								</div>
							</div>



							<div class="row">
								<div class="col-lg-12">
									<h:commandButton action="#{imovelBean.salvar()}" value="Salvar"
										style="margin-right:15px" styleClass="btn btn-success" />

									<h:commandButton action="#" value="Cancelar"
										styleClass="btn btn-warning" />
								</div>
							</div>
							<h:messages errorClass="alert alert-warning" infoClass="alert alert-success" />
						</h:form>
					</div>
				</div>
			</div>
		</div>
	</ui:composition>
</h:body>
</html>